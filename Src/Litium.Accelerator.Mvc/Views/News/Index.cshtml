@using Litium.Accelerator.Constants;
@model Litium.Accelerator.ViewModels.News.NewsViewModel

@{
    var groups = Model.News.Count / 3 + 1;
    var rest = Model.News.Count % 3;

    if(rest == 0)
    {
        groups -= 1;
    }

}


<div class="pt-5">
	<img class="img-fluid d-block mx-auto my-0" src="@Model.Image.GetUrlToImage(new System.Drawing.Size(1920,742), new System.Drawing.Size(1920,742)).Url" />
	<div class="container">
		<div class="align-content-center text-left">
			<div class="mt-3 text-uppercase">
				<p class="mb-1 text-primary">@Model.BlogTags/@Model.NewsDate.ToString("dddd, dd MMMM yyyy")</p>
				<h1 class="mb-1 font-weight-bold fs-1 w-50">@Model.Title</h1>
			</div>
			<hr class="bg-dark border border-1 border-dark w-25" />

			<div class="mt-2 w-75">
				<div class="font-weight-bold fs-5">
					@Model.Introduction
				</div>
				<div class="mt-2 fs-6">
					@Model.Text
				</div>
			</div>

			<!--Taggar-->
			<div class="mt-5 text-uppercase">
				<h5 class="font-weight-bold fs-4">
					Tags in this post
				</h5>
				<p class="text-primary">@Model.BlogTags</p>
			</div>
		</div>
	</div>



	<div id="carouselExampleControls" class="carousel slide car-height bg-light border-0 mt-5 pl-auto" data-bs-ride="carousel">
		<div class="carousel-inner container px-0">
			<h3 class="fw-bold mt-4 mx-2">In scelerisque convallis arcu pellentesque nam sed</h3>

			@for (int i = 0; i < groups; i++)
			{
				var take = i == groups ? rest : 3;
				var list = Model.News.Skip(3 * i).Take(take);

				<div class="carousel-item @(i == 0 ? "active" : "")">



					<div class="row justify-content-between my-5 mx-2">
						@foreach (var item in list)
						{
							<div class="card col-10 col-md-4 col-lg-3 rounded-3 px-0 shadow">
								@if (item.Image != null)
								{
									<img src="@item.Image.GetUrlToImage(new System.Drawing.Size(475,245), new System.Drawing.Size(475,245)).Url" class="card-img-top rounded-top" alt="Blog card image">
								}
								<div class="card-body">
									<p class="text-primary text-uppercase">@item.BlogTags/@DateTime.Now.ToShortDateString()</p>
									<h5 class="card-title fw-bold">@item.Title</h5>
									<p class="card-text">@item.Introduction</p>
									<a href="@item.Url" class="cta-arrow-red-small"></a>
								</div>
							</div>
						}
					</div>
				</div>
			}
		</div>


		<!--Controls-->
		<button class="carousel-control-prev float-start" type="button" data-bs-target="#carouselExampleControls" data-bs-slide="prev">
			<span class="carousel-arrow-left bg-white shadow px-3 py-2" aria-hidden="true"></span>
			<span class="visually-hidden">Previous</span>
		</button>
		<button class="carousel-control-next" type="button" data-bs-target="#carouselExampleControls" data-bs-slide="next">
			<span class="carousel-arrow-right bg-white shadow px-3 py-2" aria-hidden="true"></span>
			<span class="visually-hidden">Next</span>
		</button>
	</div>
</div>