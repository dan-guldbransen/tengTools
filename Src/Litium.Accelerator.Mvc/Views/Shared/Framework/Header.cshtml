@model Litium.Accelerator.ViewModels.Framework.HeaderViewModel
@using Litium.Web.Mvc

@{
	var hasGetOrganisedCTA = !string.IsNullOrEmpty(Model.GetOrganised.Href);
}

<header id="header" role="banner" class="header">

	<nav class="navbar navbar-expand-lg border-bottom border-dark border-1 py-2 d-none d-lg-flex bg-dark">
		<div class="container">
			<div class="collapse navbar-collapse me-auto">
				<ul class="navbar-nav">
					@Html.Partial("Framework/TopLink", Model)
				</ul>
			</div>

			<div class="d-flex align-items-center">
				<div class="marketselector dropdown">
					@Html.Action("MarketSelector", "Layout")
				</div>

				<div class="ms-3" id="quickSearch"></div>
			</div>
		</div>
	</nav>

	<nav class="navbar navbar-expand-lg py-2 px-3 px-lg-0 linear-bg">
		<div class="container">
			<a class="navbar-brand me-5" href="@Model.StartPageUrl">
				@Html.ImageFor(x => x.Logo, maxSize: new System.Drawing.Size(-1, 50))
			</a>

			@if (Model.Categories != null && Model.Categories.Any())
			{
				<div class="collapse navbar-collapse">
					<ul class="navbar-nav">
						@foreach (var category in Model.Categories)
						{
							<li class="nav-item px-4">
								<div class="megamenu dropdown text-uppercase">
									@Html.Partial("Framework/Subcategory", category)
								</div>
							</li>
						}
					</ul>
				</div>
			}

		<div class="d-flex align-items-center justify-content-around util-items">
			<a href="#" data-bs-toggle="offcanvas" data-bs-target="#favorites" aria-controls="favorites">
				<i class="bi bi-heart"></i>
			</a>

			@Html.Partial("Framework/Profile", Model)

			@*<div id="miniCart" class="cart cart--mini"><i class="bi bi-bag"></i></div>*@
			
			<button class="hamburger hamburger--slider d-inline-block d-md-none ms-4" type="button" data-bs-toggle="offcanvas" data-bs-target="#mobileMenu" aria-controls="mobileMenu">
				<span class="hamburger-box">
					<span class="hamburger-inner"></span>
				</span>
			</button>
		</div>
			@if (hasGetOrganisedCTA)
			{
				<a class="btn btn-link btn-cta-link mx-5 text-uppercase d-none d-lg-block" href="@Model.GetOrganised.Href" title="@Model.GetOrganised.Text">
					@Model.GetOrganised.Text
				</a>
			}
		</div>
	</nav>

	<nav class="navbar d-lg-none justify-content-between p-3 linear-bg-small">
		<div class="container d-flex justify-content-end">
			@if (hasGetOrganisedCTA)
			{
				<a class="btn btn-link btn-cta-link text-uppercase" href="@Model.GetOrganised.Href" title="@Model.GetOrganised.Text">
					@Model.GetOrganised.Text
				</a>
			}
		</div>
	</nav>
</header>


<!-- MOBILE MENU -->
<div class="offcanvas offcanvas-start w-100 dark" tabindex="-1" id="mobileMenu" aria-labelledby="mobileMenuLabel">
	<!-- Header -->
	<div class="offcanvas-header bg-dark">
		<a class="navbar-brand me-5" href="@Model.StartPageUrl">
			@Html.ImageFor(x => x.Logo, maxSize: new System.Drawing.Size(-1, 50))
		</a>
		<button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
	</div>

	<div class="offcanvas-body p-0 pb-4 bg-dark">
		<!-- Search -->
		<div class="linear-bg-small py-1 px-2">
			<div id="quickSearchMobile"></div>
		</div>

		<!-- Main categories -->
		@if (Model.Categories != null && Model.Categories.Any())
		{
			<ul class="list-group mb-3 px-3 pt-5 bg-transparent">
				@foreach (var category in Model.Categories)
				{
					<li class="list-group-item border-0 bg-transparent"><a href="@category.Url"><h2 class="text-uppercase text-white">@category.Name</h2></a></li>
				}
			</ul>
		}

		<ul class="list-group border-0 mb-2 px-3 bg-transparent">
			@if (hasGetOrganisedCTA)
			{
				<li class="list-group-item border-0 bg-transparent">
					<a href="@Model.GetOrganised.Href" class="fw-bold text-uppercase link-primary cta-mobile-menu" title="@Model.GetOrganised.Text">
						@Model.GetOrganised.Text
					</a>
				</li>
			}
			@if (Model.TopLinkList.Any())
			{
				foreach (var link in Model.TopLinkList)
				{
					if (link != null)
					{
						<li class="list-group-item border-0 bg-transparent">
							<a href="@link.Href" class="fw-bold text-white">
								@link.Text
							</a>
						</li>
					}
				}
			}
		</ul>
		<hr />
		<!-- Utils -->
		<ul class="list-group border-0 mobile-utils mt-2 px-3">
			<li class="list-group-item border-0 bg-transparent"><a class="d-flex align-items-center" href="#" data-bs-toggle="offcanvas" data-bs-target="#favorites" aria-controls="favorites"><i class="bi bi-heart me-3"></i><p class="text-white mb-1">@Html.WebSiteString("general.mobilenavigation.favorites")</p></a></li>
			
			@Html.Partial("Framework/ProfileMobile", Model)

			<!-- marketselector -->
		</ul>

		<div class="dropup">@Html.Action("MarketSelector", "Layout", new { isMobile = true })</div>
	</div>
</div>
