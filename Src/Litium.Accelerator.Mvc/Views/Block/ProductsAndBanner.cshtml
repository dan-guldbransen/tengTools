@model Litium.Accelerator.ViewModels.Block.ProductsAndBannerBlockViewModel
@{
    var ProductColumn = Model.Products.Products.Any() ? 12 / Math.Min(Model.Products.Products.Count, 4) : 0;
    var BannerColumn = Model.Banners.Banners.Any() ? 12 / Math.Min(Model.Banners.Banners.Count, 4) : 0;
}
<div class="container">
	<div class="row mixed">
		@if (!Model.ShowProductToTheRight)
		{
			@DisplayProducts(ProductColumn)
			@DisplayBanners(BannerColumn)
		}
		else
		{
			@DisplayBanners(BannerColumn)
			@DisplayProducts(ProductColumn)
		}
	</div>
</div>
@helper  DisplayHeader()
{
    <div class="row mixed-block">
        <div class="col-12 col-md-8">
            <h2 class="mixed-block__header">@Model.Products.Title</h2>
        </div>

        @if (!string.IsNullOrWhiteSpace(Model.Products.FooterLinkUrl))
        {
            <div class="col-12 col-md-4 text-right">
                <a class="mixed-block__header" id="FooterLink" href="@Model.Products.FooterLinkUrl">@Model.Products.FooterLinkText</a>
            </div>
        }
    </div>
}

@helper DisplayBanners(int bannerColumn)
{
    <div class="col-12 col-lg-6">
        @if (Model.Banners != null && Model.Banners.Banners.Any())
        {
            <div class="row">
                @foreach (var banner in Model.Banners.Banners)
                {
                    <div class="col-12 col-lg-@bannerColumn">
                        <a href="@banner.LinkUrl" class="product-and-banner-block__image-link">
                            @Html.ImageFor(x => banner.Image, maxSize: new Size(786, -1), htmlAttributes: new { @class = "product-and-banner-block__image" })
                        </a>
                    </div>
                }
            </div>
        }
    </div>
}

@helper DisplayProducts(int productColumn)
{
    <div class="col-12 col-lg-6">
        @DisplayHeader()
        @if (Model.Products != null && Model.Products.Products.Any())
        {
            <div class="row">
                @foreach (var product in Model.Products.Products)
                {
                    <div class="col-12 col-lg-@productColumn product--mixed">
                        @Html.DisplayFor(x => product)
                    </div>
                }
            </div>
        }
    </div>
}